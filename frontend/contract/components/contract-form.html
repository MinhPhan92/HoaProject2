<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Contract Demo</title>
  <style>
    body { font-family: sans-serif; padding: 30px; }
    label { display: block; margin-top: 10px; }
    input, select, textarea { width: 250px; padding: 6px; margin-top: 5px; }
    button { margin-top: 15px; padding: 8px 15px; background: #4CAF50; color: white; border: none; cursor: pointer; }
    button:hover { background: #45a049; }
    #status { margin-top: 20px; font-weight: bold; }
  </style>
</head>
<body>
  <h2>üìù Demo - T·∫°o h·ª£p ƒë·ªìng thu√™ xe</h2>

  <form id="contractForm">
    <label>Kh√°ch h√†ng ID:</label>
    <input type="number" id="customer_id" value="1">

    <label>Ng√†y b·∫Øt ƒë·∫ßu:</label>
    <input type="datetime-local" id="start_date">

    <label>Ng√†y k·∫øt th√∫c:</label>
    <input type="datetime-local" id="end_date">

    <label>Chi nh√°nh nh·∫≠n xe:</label>
    <input type="number" id="branch_receive_id" value="1">

    <label>Chi nh√°nh tr·∫£ xe:</label>
    <input type="number" id="branch_return_id" value="1">

    <label>Ti·ªÅn ƒë·∫∑t c·ªçc:</label>
    <input type="number" id="deposit" value="500000">

    <label>Ngu·ªìn thu√™:</label>
    <select id="rental_source">
      <option value="Walk-in">Walk-in</option>
      <option value="Online">Online</option>
    </select>

    <label>Ghi ch√∫:</label>
    <textarea id="note"></textarea>

    <button type="button" onclick="createContract()">T·∫°o h·ª£p ƒë·ªìng</button>
  </form>

  <div id="status"></div>

  <script>
    async function createContract() {
      const data = {
        customer_id: parseInt(document.getElementById('customer_id').value),
        start_date: document.getElementById('start_date').value,
        end_date: document.getElementById('end_date').value,
        branch_receive_id: parseInt(document.getElementById('branch_receive_id').value),
        branch_return_id: parseInt(document.getElementById('branch_return_id').value),
        deposit: parseFloat(document.getElementById('deposit').value),
        rental_source: document.getElementById('rental_source').value,
        note: document.getElementById('note').value
      };

      const res = await fetch("http://127.0.0.1:8000/contracts", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });

      const status = document.getElementById("status");
      if (res.ok) {
        status.textContent = "‚úÖ T·∫°o h·ª£p ƒë·ªìng th√†nh c√¥ng!";
        status.style.color = "green";
      } else {
        status.textContent = "‚ùå L·ªói khi t·∫°o h·ª£p ƒë·ªìng!";
        status.style.color = "red";
      }
    }
  </script>
</body>
</html>
